import hashlib
from itsdangerous import URLSafeTimedSerializer
from flask.sessions import TaggedJSONSerializer

def decode_flask_cookie(secret_key, cookie_str):
    salt = 'cookie-session'
    serializer = TaggedJSONSerializer()
    signer_kwargs = {
        'key_derivation': 'hmac',
        'digest_method': hashlib.sha1
    }
    s = URLSafeTimedSerializer(secret_key, salt=salt, serializer=serializer, signer_kwargs=signer_kwargs)
    return s.loads(cookie_str)

key = "385c16dd09098b011d0086f9e218a0a2"

print decode_flask_cookie(key, ".eJwlj1tqAzEMAO_i73xIWku2cplFL9MQaGE3-Sq9exZ6gBlmftu-jjq_2v11vOvW9ke2exvGAWE0N4HiGX3R5hMHZIkO9KolWOCMIEEZKJLahTdL46l9FTKLUDkr924ebsEL1MWScMSyyVOKclEvzLgsSoCkgpQs7dbiPNb--nnW99WTaRbgHkUuboM2rMmUyqK9gxmpylK8uPdZx_8EQfv7AAWBP2w.Dprfdg.yal_A0PqVFK-gRhbeVGZRwgNcwE")
